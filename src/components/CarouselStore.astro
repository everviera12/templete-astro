---
const { imagePathsStore } = Astro.props;
console.log(imagePathsStore);
---

<style>
  .embla {
    max-width: 92rem;
    margin: 4rem 1.5rem;
    padding: 1rem 0;
    --slide-size: 20%;
  }

  .embla__viewport {
    overflow: hidden;
  }

  .embla__container {
    display: flex;
    align-items: center;
  }

  .embla__slide {
    flex: 0 0 var(--slide-size);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .embla__slide img {
    width: 45%;
    height: auto;
    /* object-fit: contain; */
    transition: all 0.35s ease;
  }

  /* ðŸ”¹ Efecto visual al pasar */
  .embla__slide img {
    border-radius: 0.5rem;
    mix-blend-mode: multiply;
  }

  /* ðŸ”¹ Responsivo */
  @media (max-width: 1024px) {
    .embla {
      --slide-size: 30%;
      --slide-spacing: 1.5rem;
    }

    .embla__slide img {
      width: 70%;
    }
  }

  @media (max-width: 640px) {
    .embla {
      --slide-size: 45%;
      --slide-spacing: 1rem;
    }

    .embla__slide img {
      width: 80%;
    }
  }
</style>

<section class="embla">
  <div class="embla__viewport">
    <div class="embla__container">
      {imagePathsStore.map((src: string, i: number) => (
        <div class="embla__slide">
          <img src={src} alt={`logo ${i + 1}`} loading="lazy" />
        </div>
      ))}
    </div>
  </div>
</section>

<script src="https://unpkg.com/embla-carousel/embla-carousel.umd.js"></script>
<script src="https://unpkg.com/embla-carousel-autoplay/embla-carousel-autoplay.umd.js"></script>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const emblaNode = document.querySelector(".embla");
    const viewport = emblaNode.querySelector(".embla__viewport");

    const autoplay = EmblaCarouselAutoplay({
      delay: 2500,
      stopOnInteraction: false,
    });

    const emblaApi = EmblaCarousel(
      viewport,
      { loop: true, align: "start", skipSnaps: false },
      [autoplay]
    );

    /* console.log("ðŸŽ  Carrusel de logos mejorado iniciado", emblaApi); */
  });
</script>
